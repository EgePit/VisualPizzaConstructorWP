<?php
namespace Core\Classes;

class AdminSettings {
    var $settings_fields = array(
        'Visual constructor buttons' => array(
            'vconst-button' => array(
                'width' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'height' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'background-color' => array(
                    'type' => 'color',
                    'val' => ''
                ),
                'color' => array(
                    'type' => 'color',
                    'val' => ''
                ),
                'font-size' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        'pt' => 'pt',
                    )
                ),
                'margin-top' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'margin-right' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'margin-bottom' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'margin-left' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
            )
        ),
        'Visual constructor buttons hover' => array(
            'vconst-button_hover' => array(
                'background-color' => array(
                    'type' => 'color',
                    'val' => '',
                ),
                'color' => array(
                    'type' => 'color',
                    'val' => '',
                )
            )
        ),
        'Visual constructor menu' => array(
            'vconst-signle-menu-item' => array(
                'width' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'height' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'background-color' => array(
                    'type' => 'color',
                    'val' => '',
                ),
                'color' => array(
                    'type' => 'color',
                    'val' => ''
                ),
                'font-size' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        'pt' => 'pt',
                    )
                ),
                'margin-top' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'margin-right' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'margin-bottom' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'margin-left' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                )
            )
        ),
        'Visual constructor menu hover' => array(
            'vconst-signle-menu-item_hover' => array(
                'background-color' => array(
                    'type' => 'color',
                    'val' => '',
                ),
                'color' => array(
                    'type' => 'color',
                    'val' => '',
                ),
                'font-size' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        'pt' => 'pt',
                    )
                ),
            )
        ),
        'Visual constructor menu selected' => array(
            'vconst-signle-menu-item_selected' => array(
                'background-color' => array(
                    'type' => 'color',
                    'val' => '',
                ),
                'color' => array(
                    'type' => 'color',
                    'val' => '',
                ),
                'font-size' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        'pt' => 'pt',
                    )
                ),
            )
        ),
        'Visual constructor menu holder' => array(
            'vconst-menu-holder' => array(
                'width' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'height' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'background-color' => array(
                    'type' => 'color',
                    'val' => '',
                ),
                'margin-top' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'margin-right' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'margin-bottom' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                ),
                'margin-left' => array(
                    'type' => 'text',
                    'val' => '',
                    'unit' => array(
                        'px' => 'px',
                        '%' => '%',
                        'none' => ''
                    )
                )
            )
        )
    );

    function get_admin_settings_html($saved_styles) {
        ob_start();
        include_once(dirname(__FILE__).'/../view/admin_settings.php');
        $html = ob_get_contents();
        ob_clean();
        return $html;
    }

    function save_custom_style($data) {
        $custom_style = '';

        foreach($data as $class=> $styles) {
            if(preg_match('/\_hover/', $class))
                $class_name = "\n.".preg_replace('/\_hover/', '', $class).":hover {";
            else if(preg_match('/\_selected/', $class))
                $class_name = "\n.".preg_replace('/\_selected/', '', $class).".selected {";
            else
                $class_name = "\n.".$class." {";

            $custom_style .= $class_name;

            foreach($styles as $prop=> $val) {
                if(is_array($val))
                    $custom_style .= "\n\t".$prop.": ".$val['val'].$val['unit'];
                else
                    $custom_style .= "\n\t".$prop.": ".$val;

                $custom_style .= ";";
            }
            $custom_style .= "\n}";
        }

        file_put_contents(__DIR__.'/../assets/css/custom_style.css', $custom_style);
    }
}